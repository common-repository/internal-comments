{"version":3,"file":"ajax.js","mappings":"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","sources":["webpack://dws-internal-comments/./src/assets/dev/ts/models/IC_AJAX.ts","webpack://dws-internal-comments/./src/assets/dev/ts/ajax.ts"],"sourcesContent":["import { IC_AJAX_Callbacks, Window } from \"../interfaces\";\nimport * as jQuery from \"jquery\";\ndeclare let window: Window;\n\n/**\n * @since   1.0.0\n * @version 1.1.0\n */\nexport class IC_AJAX {\n    // region FIELDS AND CONSTANTS\n\n    /**\n     * @since   1.0.0\n     * @version 1.0.0\n     *\n     * @private\n     */\n    private static instance: IC_AJAX;\n\n    // endregion\n\n    // region CONSTRUCTORS\n\n    /**\n     * @since   1.0.0\n     * @version 1.0.0\n     */\n    private constructor() {}\n\n    // endregion\n\n    // region METHODS\n\n    /**\n     * @since   1.0.0\n     * @version 1.0.0\n     */\n    public static get_instance(): IC_AJAX {\n        if ( ! IC_AJAX.instance ) {\n            IC_AJAX.instance = new IC_AJAX();\n        }\n\n        return IC_AJAX.instance;\n    }\n\n    /**\n     * @since   1.0.0\n     * @version 1.0.0\n     *\n     * @param   method\n     * @param   action\n     * @param   data\n     * @param   callbacks\n     * @param   filter_args\n     */\n    public make_request( method: string, action: string, data: object, callbacks: IC_AJAX_Callbacks = {}, ...filter_args: any[] ) {\n        jQuery.ajax(\n            window.ajaxurl,\n            {\n            method : method,\n            data   : window.wp.hooks.applyFilters( action.replace( 'dws_ic_', 'dws_ic.ajax.' ) + '.data', {\n                action : action,\n                ...data\n            }, ...filter_args )\n        } )\n            .done( function( data ) {\n                if ( data.success ) {\n                    if ( undefined !== callbacks.success ) {\n                        callbacks.success( data.data );\n                    }\n                } else {\n                    if ( undefined === callbacks.error ) {\n                        alert( data.data );\n                    } else {\n                        callbacks.error( data.data );\n                    }\n                }\n            } )\n            .fail( function( jqXHR, textStatus ) {\n                console.log( jqXHR, textStatus );\n\n                if ( undefined === callbacks.fail ) {\n                    const error_message = jqXHR.status + ': ' + jqXHR.statusText;\n                    alert( window.dws_ic_ajax_vars.ajax_fail_msg.replace( '%error_msg%', error_message ) );\n                } else {\n                    callbacks.fail( jqXHR, textStatus );\n                }\n            } )\n            .always( function() {\n                if ( undefined !== callbacks.always ) {\n                    callbacks.always();\n                }\n            } );\n    }\n\n    /**\n     * @since   1.0.0\n     * @version 1.0.0\n     *\n     * @param   post_id\n     * @param   nonce\n     * @param   data\n     * @param   callbacks\n     * @param   filter_args\n     */\n    public insert_comment( post_id: number, nonce: string, data: object,  callbacks: IC_AJAX_Callbacks, ...filter_args: any[] ) {\n        this.make_request( 'POST', 'dws_ic_insert_comment', {\n            post_id  : post_id,\n            _wpnonce : nonce,\n            ...data\n        }, callbacks, ...filter_args );\n    }\n\n    /**\n     * @since   1.1.0\n     * @version 1.1.0\n     *\n     * @param   post_id\n     * @param   callbacks\n     * @param   filter_args\n     */\n    public get_comments( post_id: number, callbacks: IC_AJAX_Callbacks, ...filter_args: any[] ) {\n        this.make_request( 'GET', 'dws_ic_get_comments', {\n            post_id  : post_id,\n            _wpnonce : window.dws_ic_ajax_vars.get_comments_nonce,\n        }, callbacks, ...filter_args );\n    }\n\n    /**\n     * @since   1.0.0\n     * @version 1.0.0\n     *\n     * @param   comment_id\n     * @param   callbacks\n     * @param   filter_args\n     */\n    public get_comment( comment_id: number, callbacks: IC_AJAX_Callbacks, ...filter_args: any[] ) {\n        this.make_request( 'GET', 'dws_ic_get_comment', {\n            comment_id : comment_id,\n            _wpnonce   : window.dws_ic_ajax_vars.get_comments_nonce,\n        }, callbacks, ...filter_args );\n    }\n\n    /**\n     * @since   1.0.0\n     * @version 1.0.0\n     *\n     * @param   comment_id\n     * @param   nonce\n     * @param   data\n     * @param   callbacks\n     * @param   filter_args\n     */\n    public update_comment( comment_id: number, nonce: string, data: object, callbacks: IC_AJAX_Callbacks, ...filter_args: any[] ) {\n        this.make_request( 'POST', 'dws_ic_update_comment', {\n            comment_id : comment_id,\n            _wpnonce   : nonce,\n            ...data,\n        }, callbacks, ...filter_args );\n    }\n\n    /**\n     * @since   1.0.0\n     * @version 1.0.0\n     *\n     * @param   comment_id\n     * @param   nonce\n     * @param   callbacks\n     * @param   filter_args\n     */\n    public trash_comment( comment_id: number, nonce: string, callbacks: IC_AJAX_Callbacks, ...filter_args: any[] ) {\n        this.make_request( 'POST', 'dws_ic_trash_comment', {\n            comment_id : comment_id,\n            _wpnonce   : nonce,\n        }, callbacks, ...filter_args );\n    }\n\n    // endregion\n}\n","import jQuery from \"jquery\";\nimport { Window } from \"./interfaces\";\nimport { IC_AJAX } from \"./models/IC_AJAX\";\ndeclare let window: Window;\n\njQuery( function () {\n    // Instantiate the AJAX singleton class.\n    window.dws_ic_ajax = IC_AJAX.get_instance();\n} );\n"],"names":["IC_AJAX","method","action","data","callbacks","filter_args","jQuery","ajax","window","ajaxurl","wp","hooks","applyFilters","replace","done","success","undefined","error","alert","fail","jqXHR","textStatus","console","log","error_message","status","statusText","dws_ic_ajax_vars","ajax_fail_msg","always","post_id","nonce","make_request","_wpnonce","get_comments_nonce","comment_id","instance","dws_ic_ajax","get_instance"],"sourceRoot":""}