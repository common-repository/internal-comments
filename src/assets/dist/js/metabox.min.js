(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}e=i,o=[{key:"get_instance",value:function(){return i.instance=i.instance?i.instance:new i}}],(n=[{key:"init",value:function(){var s=this;this.$metabox.on("click","button.save-insert-internal-comment",function(t){var e=s.$textarea.val();"string"!=typeof e||0===e.trim().length?alert(window.dws_ic_metabox_vars.empty_comment_msg):(t.preventDefault(),s.insert_comment(e))}),this.$metabox.on("click",".dws-internal-comment__actions .internal-comment-action ",function(t){var e=jQuery(t.target),n=e.data("action"),o=e.data("nonce"),a=e.parents("li.dws-internal-comment"),i=parseInt(a.attr("rel"));"string"==typeof n&&0<n.trim().length&&(window.wp.hooks.doAction("dws_ic.metabox.action",n,i,o,t,e,a,s),window.wp.hooks.doAction("dws_ic.metabox.action."+n,i,o,t,e,a,s))}),window.wp.hooks.addAction("dws_ic.metabox.action","dws/internal-comments/metabox",this.comment_action_click_handler,10)}},{key:"comment_action_click_handler",value:function(t,e,n,o){"trash"===t&&(o.preventDefault(),i.get_instance().trash_comment(e,n))}},{key:"refresh_comments",value:function(){var e=this;e.$overlay.show(),window.dws_ic_ajax.make_request("GET","dws_ic_get_comments_list_output",{post_id:window.dws_ic_metabox_vars.post_id},{success:function(t){e.$comments_wrapper.html(t)},always:function(){e.$overlay.hide()}})}},{key:"insert_comment",value:function(t){var e=this;e.$overlay.show(),window.dws_ic_ajax.insert_comment(window.dws_ic_metabox_vars.post_id,window.dws_ic_metabox_vars.insert_comment_nonce,{content:t},{success:function(){e.$textarea.val(""),e.refresh_comments()},always:function(){e.$overlay.hide()}},e)}},{key:"trash_comment",value:function(t,e){var n=this;n.$overlay.show(),window.dws_ic_ajax.trash_comment(t,e,{success:function(){n.refresh_comments()},always:function(){n.$overlay.hide()}},n)}}])&&t(e.prototype,n),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1});var e,n,o,a=i;function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.$metabox=jQuery("#dws-internal-comments"),this.$comments_wrapper=this.$metabox.find(".dws-internal-comments"),this.$textarea=this.$metabox.find("#new-internal-comment"),this.$overlay=this.$metabox.find(".dws-internal-comments-overlay"),this.init()}jQuery(function(t){window.dws_ic_metabox=a.get_instance()})})();
//# sourceMappingURL=metabox.min.js.map